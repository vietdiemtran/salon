import{j as e,X as L,r as f}from"./index-Dj3cS6za.js";import{B as w}from"./badge-DWVlFQai.js";import{B as N}from"./button-Crtod_yx.js";import{D as F,b as O,c as B,d as G,f as $}from"./dialog-Bn5CZ0A2.js";import{T as S,a as P,b as T,c as x,d as k,e as d}from"./table-Bh6-j-BX.js";import{f as E}from"./format-C_m1koB7.js";import{C as R,b as z,c as K,d as Q,a as X}from"./card-C8qa4OaK.js";import{I as _}from"./input-CZim18_A.js";import{S as q,a as J,b as W,c as Y,d as y}from"./select-Ck2txczR.js";import{S as Z}from"./search-BHHTIAnE.js";import{C as U}from"./chevron-left-BV-eJxQL.js";import{C as ee}from"./chevron-right-HV8dK0o4.js";import"./Combination-27LuzUOQ.js";import"./index-CF79JPbI.js";import"./index-BGWUGcaw.js";import"./index-DvGPzrVe.js";import"./check-sEMdCc3q.js";var r=(s=>(s.ACTIVE="active",s.COMPLETED="completed",s.PENDING="pending",s))(r||{});const te=({selectedUser:s,isDetailsOpen:h,setIsDetailsOpen:a,handlePayment:l})=>{if(!s)return null;const i=n=>{const o={[r.ACTIVE]:{variant:"default",label:"Đang sử dụng"},[r.COMPLETED]:{variant:"secondary",label:"Hoàn thành"},[r.PENDING]:{variant:"outline",label:"Chờ xử lý"}}[n];return e.jsx(w,{variant:o.variant,children:o.label})},u=n=>n!==r.COMPLETED;return e.jsx(F,{open:h,onOpenChange:a,children:e.jsxs(O,{className:"max-w-3xl",children:[e.jsx(B,{children:e.jsx(G,{className:"text-xl font-bold",children:"Chi tiết dịch vụ"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-muted/30 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Khách hàng"}),e.jsx("p",{className:"text-lg font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Số điện thoại"}),e.jsx("p",{className:"text-lg font-medium",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trạng thái"}),e.jsx("div",{className:"mt-1",children:i(s.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tổng tiền"}),e.jsx("p",{className:"text-lg font-medium text-primary",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.totalAmount)})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-medium",children:"Danh sách dịch vụ"}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(T,{children:[e.jsx(x,{children:"Tên dịch vụ"}),e.jsx(x,{children:"Giá"}),e.jsx(x,{children:"Thời gian bắt đầu"}),e.jsx(x,{children:"Thời gian kết thúc"})]})}),e.jsx(k,{children:s.services.map(n=>e.jsxs(T,{children:[e.jsx(d,{className:"font-medium",children:n.name}),e.jsx(d,{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n.price)}),e.jsx(d,{children:E(n.startTime,"HH:mm dd/MM/yyyy")}),e.jsx(d,{children:E(n.endTime,"HH:mm dd/MM/yyyy")})]},n.id))})]})})]})]}),e.jsxs($,{className:"mt-6",children:[e.jsx(N,{variant:"outline",onClick:()=>a(!1),children:"Đóng"}),s&&u(s.status)&&e.jsx(N,{variant:"default",onClick:()=>{l(s.id),a(!1)},children:"Thanh toán"})]})]})})},se=({users:s,paginatedUsers:h,totalPages:a,currentPage:l,searchTerm:i,statusFilter:u,setSearchTerm:n,setStatusFilter:p,handleRowClick:o,handlePayment:C,handlePageChange:c})=>{const v=t=>{const b={[r.ACTIVE]:{variant:"default",label:"Đang sử dụng"},[r.COMPLETED]:{variant:"secondary",label:"Hoàn thành"},[r.PENDING]:{variant:"outline",label:"Chờ xử lý"}}[t];return e.jsx(w,{variant:b.variant,children:b.label})},j=t=>t!==r.COMPLETED;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(_,{placeholder:"Tìm kiếm theo tên hoặc số điện thoại...",className:"pl-8",value:i,onChange:t=>n(t.target.value)}),i&&e.jsx("button",{className:"absolute right-2.5 top-2.5 text-muted-foreground hover:text-foreground",onClick:()=>n(""),children:e.jsx(L,{className:"h-4 w-4"})})]}),e.jsxs(q,{value:u,onValueChange:p,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(W,{placeholder:"Lọc theo trạng thái"})}),e.jsxs(Y,{children:[e.jsx(y,{value:"all",children:"Tất cả"}),e.jsx(y,{value:r.ACTIVE,children:"Đang sử dụng"}),e.jsx(y,{value:r.COMPLETED,children:"Hoàn thành"}),e.jsx(y,{value:r.PENDING,children:"Chờ xử lý"})]})]})]})}),e.jsxs(R,{children:[e.jsxs(z,{children:[e.jsx(K,{children:"Danh sách khách hàng"}),e.jsxs(Q,{children:["Tổng cộng: ",s.length," khách hàng"]})]}),e.jsxs(X,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(T,{children:[e.jsx(x,{children:"Tên khách hàng"}),e.jsx(x,{children:"Số điện thoại"}),e.jsx(x,{children:"Trạng thái"}),e.jsx(x,{children:"Tổng tiền"}),e.jsx(x,{children:"Thao tác"})]})}),e.jsx(k,{children:h.length>0?h.map(t=>e.jsxs(T,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(t),children:[e.jsx(d,{children:t.name}),e.jsx(d,{children:t.phone}),e.jsx(d,{children:v(t.status)}),e.jsx(d,{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t.totalAmount)}),e.jsx(d,{children:e.jsx(N,{variant:"default",onClick:g=>{g.stopPropagation(),C(t.id)},disabled:!j(t.status),children:"Thanh toán"})})]},t.id)):e.jsx(T,{children:e.jsx(d,{colSpan:5,className:"py-6 text-center",children:"Không tìm thấy dữ liệu"})})})]})}),a>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>c(l-1),disabled:l===1,children:e.jsx(U,{className:"h-4 w-4"})}),Array.from({length:a},(t,g)=>g+1).map(t=>e.jsx(N,{variant:l===t?"default":"outline",size:"sm",onClick:()=>c(t),children:t},t)),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>c(l+1),disabled:l===a,children:e.jsx(ee,{className:"h-4 w-4"})})]})]})]})]})},ne=()=>{const s=[],h=["Haircut","Hair Coloring","Manicure","Pedicure","Facial","Massage","Hair Treatment"];for(let a=1;a<=50;a++){const l=Math.floor(Math.random()*3)+1,i=[];let u=0;for(let o=0;o<l;o++){const C=h[Math.floor(Math.random()*h.length)],c=Math.floor(Math.random()*5e5)+1e5,v=Math.floor(Math.random()*120)+30,j=new Date(Date.now()-Math.floor(Math.random()*864e5)),t=new Date(j.getTime()+v*6e4);i.push({id:`s${a}${o}`,name:C,price:c,duration:v,startTime:j,endTime:t}),u+=c}const n=[r.ACTIVE,r.COMPLETED,r.PENDING],p=n[Math.floor(Math.random()*n.length)];s.push({id:`${a}`,name:`Customer ${a}`,phone:`0${Math.floor(Math.random()*9e8)+1e8}`,status:p,services:i,totalAmount:u})}return s},Ce=()=>{const[s,h]=f.useState(null),[a,l]=f.useState(!1),[i,u]=f.useState(""),[n,p]=f.useState("all"),[o,C]=f.useState(1),[c,v]=f.useState([]),j=10,t=m=>{h(m),l(!0)},g=m=>{console.log("Processing payment for user:",m)},b=m=>{C(m)},M=f.useMemo(()=>c.filter(m=>{const V=m.name.toLowerCase().includes(i.toLowerCase())||m.phone.includes(i),A=n==="all"||m.status===n;return V&&A}),[i,n,c]),I=Math.ceil(M.length/j),D=(o-1)*j,H=M.slice(D,D+j);return f.useEffect(()=>{v(ne())},[]),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx("div",{children:e.jsx("h2",{className:"font-heading text-2xl font-bold text-neutral-900",children:"Quản lý thu ngân"})})}),e.jsx(se,{users:c,paginatedUsers:H,totalPages:I,currentPage:o,searchTerm:i,statusFilter:n,setSearchTerm:u,setStatusFilter:p,handleRowClick:t,handlePayment:g,handlePageChange:b}),e.jsx(te,{selectedUser:s,isDetailsOpen:a,setIsDetailsOpen:l,handlePayment:g})]})};export{Ce as default};
