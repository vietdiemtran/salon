import{r as i,u as G,a as Z,j as e,c as ee,P as F,b as z,d as se,e as A,f as B,s as re,g as ne,h as te,i as ae,k as oe,l as ie,m as le}from"./index-Co3jKZaL.js";import{B as V}from"./button-BNCUvJzd.js";import{C as ce,a as de}from"./card-5fN4BC23.js";import{u as me}from"./index-BV-DTqk3.js";import{u as he,C as ue}from"./index-m_3Aq4-g.js";import{z as E,u as D,F as q,a as m,b as h,c as u,d as x,e as f,s as U}from"./zod-DR_j3zP9.js";import{I as j}from"./input-DAU5vPOq.js";import{S as xe,a as pe,b as fe,c as je,d as T}from"./select-CMLZ4ZLM.js";import{T as ge,a as be,b as H,c as K}from"./tabs-DcYlk8AQ.js";import{p as I,a as ve,t as Ne,b as ke,c as w,s as ye,d as Ce}from"./index-P0gQCl1x.js";import{S as O}from"./scissors-DX-8gafM.js";import"./label-BQaUV1Av.js";import"./Combination-Bb8ckWgm.js";import"./index-C7ei8kKs.js";import"./index-pdkFIaqS.js";var R="Checkbox",[we,Ye]=ee(R),[Se,Ee]=we(R),X=i.forwardRef((r,l)=>{const{__scopeCheckbox:n,name:p,checked:b,defaultChecked:o,required:d,disabled:t,value:v="on",onCheckedChange:N,form:s,...k}=r,[a,_]=i.useState(null),L=G(l,c=>_(c)),y=i.useRef(!1),P=a?s||!!a.closest("form"):!0,[C,M]=Z({prop:b,defaultProp:o??!1,onChange:N,caller:R}),Y=i.useRef(C);return i.useEffect(()=>{const c=a==null?void 0:a.form;if(c){const S=()=>M(Y.current);return c.addEventListener("reset",S),()=>c.removeEventListener("reset",S)}},[a,M]),e.jsxs(Se,{scope:n,state:C,disabled:t,children:[e.jsx(F.button,{type:"button",role:"checkbox","aria-checked":g(C)?"mixed":C,"aria-required":d,"data-state":W(C),"data-disabled":t?"":void 0,disabled:t,value:v,...k,ref:L,onKeyDown:z(r.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:z(r.onClick,c=>{M(S=>g(S)?!0:!S),P&&(y.current=c.isPropagationStopped(),y.current||c.stopPropagation())})}),P&&e.jsx(J,{control:a,bubbles:!y.current,name:p,value:v,checked:C,required:d,disabled:t,form:s,style:{transform:"translateX(-100%)"},defaultChecked:g(o)?!1:o})]})});X.displayName=R;var Q="CheckboxIndicator",$=i.forwardRef((r,l)=>{const{__scopeCheckbox:n,forceMount:p,...b}=r,o=Ee(Q,n);return e.jsx(se,{present:p||g(o.state)||o.state===!0,children:e.jsx(F.span,{"data-state":W(o.state),"data-disabled":o.disabled?"":void 0,...b,ref:l,style:{pointerEvents:"none",...r.style}})})});$.displayName=Q;var Pe="CheckboxBubbleInput",J=i.forwardRef(({__scopeCheckbox:r,control:l,checked:n,bubbles:p=!0,defaultChecked:b,...o},d)=>{const t=i.useRef(null),v=G(t,d),N=me(n),s=he(l);i.useEffect(()=>{const a=t.current;if(!a)return;const _=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(_,"checked").set;if(N!==n&&y){const P=new Event("click",{bubbles:p});a.indeterminate=g(n),y.call(a,g(n)?!1:n),a.dispatchEvent(P)}},[N,n,p]);const k=i.useRef(g(n)?!1:n);return e.jsx(F.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??k.current,...o,tabIndex:-1,ref:v,style:{...o.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});J.displayName=Pe;function g(r){return r==="indeterminate"}function W(r){return g(r)?"indeterminate":r?"checked":"unchecked"}var Ie=X,Re=$;const _e=i.forwardRef(({className:r,...l},n)=>e.jsx(Ie,{ref:n,className:A("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...l,children:e.jsx(Re,{className:A("flex items-center justify-center text-current"),children:e.jsx(ue,{className:"h-4 w-4"})})})),Me=E.object({email:E.string().email({message:"Email không hợp lệ"}),password:E.string().min(5,{message:"Mật khẩu phải có ít nhất 6 ký tự"}),rememberMe:E.boolean().optional()}),Te=I("user_role",["customer","staff","owner"]);I("appointment_status",["pending","confirmed","cancelled","completed"]);I("payment_status",["pending","paid","refunded"]);I("reminder_status",["pending","sent","failed"]);const Fe=ve("users",{id:ye("id").primaryKey(),email:w("email").notNull().unique(),password:w("password").notNull(),firstName:w("first_name").notNull(),lastName:w("last_name").notNull(),phone:w("phone"),role:Te("role").notNull().default("customer"),profileImage:w("profile_image"),verified:ke("verified").default(!1),createdAt:Ne("created_at").defaultNow()}),Le=Ce(Fe).omit({id:!0,createdAt:!0}),ze=Le.extend({confirmPassword:E.string().min(6)}).refine(r=>r.password===r.confirmPassword,{message:"Mật khẩu xác nhận không khớp",path:["confirmPassword"]});function Ze(){const r=B(re),l=B(ne),n=te(),p=ae(),[b,o]=i.useState("login");i.useEffect(()=>{r&&p(oe.dashboard.path)},[r,p]);const d=D({resolver:U(Me),defaultValues:{email:"",password:"",rememberMe:!1}}),t=D({resolver:U(ze),defaultValues:{email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"customer"}});function v(s){const{email:k,password:a}=s;n(ie({email:k,password:a}))}function N(s){const{confirmPassword:k,...a}=s;n(le(a))}return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"grid w-full max-w-4xl gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"hidden rounded-lg bg-primary p-8 text-white shadow-lg md:block",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(O,{className:"mr-2 size-8"}),e.jsx("h2",{className:"font-heading text-2xl font-bold",children:"Salon Manager"})]}),e.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Hệ thống Quản lý và Vận hành Salon Tóc"}),e.jsx("p",{className:"mb-4",children:"Giải pháp toàn diện giúp tối ưu hóa quy trình đặt lịch, quản lý dịch vụ và thu hút khách hàng."}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 flex size-5 items-center justify-center rounded-full bg-white bg-opacity-20",children:"✓"}),e.jsx("span",{children:"Dễ dàng đặt lịch và quản lý lịch hẹn"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 flex size-5 items-center justify-center rounded-full bg-white bg-opacity-20",children:"✓"}),e.jsx("span",{children:"Theo dõi dịch vụ và khuyến mãi"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 flex size-5 items-center justify-center rounded-full bg-white bg-opacity-20",children:"✓"}),e.jsx("span",{children:"Nhắc nhở tự động qua SMS và email"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 flex size-5 items-center justify-center rounded-full bg-white bg-opacity-20",children:"✓"}),e.jsx("span",{children:"Gợi ý kiểu tóc sử dụng AI"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 flex size-5 items-center justify-center rounded-full bg-white bg-opacity-20",children:"✓"}),e.jsx("span",{children:"Báo cáo doanh thu và phân tích kinh doanh"})]})]})]}),e.jsx(ce,{children:e.jsxs(de,{className:"pt-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-center md:hidden",children:[e.jsx(O,{className:"mr-2 size-8 text-primary"}),e.jsx("h2",{className:"font-heading text-2xl font-bold text-primary",children:"Salon Manager"})]}),e.jsxs(ge,{defaultValue:"login",value:b,onValueChange:o,children:[e.jsxs(be,{className:"mb-4 grid w-full grid-cols-2",children:[e.jsx(H,{value:"login",children:"Đăng nhập"}),e.jsx(H,{value:"register",children:"Đăng ký"})]}),e.jsx(K,{value:"login",children:e.jsx(q,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(v),className:"space-y-4",children:[e.jsx(m,{control:d.control,name:"email",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Email"}),e.jsx(x,{children:e.jsx(j,{placeholder:"vidu@example.com",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:d.control,name:"password",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Mật khẩu"}),e.jsx(x,{children:e.jsx(j,{type:"password",placeholder:"••••••",...s})}),e.jsx(f,{})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{control:d.control,name:"rememberMe",render:({field:s})=>e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(x,{children:e.jsx(_e,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(u,{className:"!mt-0 cursor-pointer text-sm",children:"Ghi nhớ đăng nhập"})]})}),e.jsx("a",{href:"#",className:"text-sm text-primary hover:underline",children:"Quên mật khẩu?"})]}),e.jsx(V,{type:"submit",className:"w-full",disabled:l,children:l?"Đang xử lý...":"Đăng nhập"})]})})}),e.jsx(K,{value:"register",children:e.jsx(q,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(N),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{control:t.control,name:"firstName",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Họ"}),e.jsx(x,{children:e.jsx(j,{placeholder:"Nguyễn",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:t.control,name:"lastName",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Tên"}),e.jsx(x,{children:e.jsx(j,{placeholder:"Văn A",...s})}),e.jsx(f,{})]})})]}),e.jsx(m,{control:t.control,name:"email",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Email"}),e.jsx(x,{children:e.jsx(j,{placeholder:"vidu@example.com",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:t.control,name:"phone",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Số điện thoại"}),e.jsx(x,{children:e.jsx(j,{placeholder:"0912345678",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:t.control,name:"password",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Mật khẩu"}),e.jsx(x,{children:e.jsx(j,{type:"password",placeholder:"••••••",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:t.control,name:"confirmPassword",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Xác nhận mật khẩu"}),e.jsx(x,{children:e.jsx(j,{type:"password",placeholder:"••••••",...s})}),e.jsx(f,{})]})}),e.jsx(m,{control:t.control,name:"role",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Loại tài khoản"}),e.jsxs(xe,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(x,{children:e.jsx(pe,{children:e.jsx(fe,{placeholder:"Chọn loại tài khoản"})})}),e.jsxs(je,{children:[e.jsx(T,{value:"customer",children:"Khách hàng"}),e.jsx(T,{value:"staff",children:"Nhân viên (yêu cầu xác nhận)"}),e.jsx(T,{value:"owner",children:"Chủ salon (yêu cầu xác nhận)"})]})]}),e.jsx(f,{})]})}),e.jsx(V,{type:"submit",className:"w-full",disabled:l,children:l?"Đang xử lý...":"Đăng ký"})]})})})]})]})})]})})}export{Ze as default};
