var js=Object.defineProperty;var Os=(r,e,t)=>e in r?js(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>Os(r,typeof e!="symbol"?e+"":e,t);import{z as w}from"./zod-DR_j3zP9.js";const s=Symbol.for("drizzle:entityKind");function P(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,s))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(s in t&&t[s]===e[s])return!0;t=Object.getPrototypeOf(t)}return!1}var Z;Z=s;class B{constructor(e,t){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(B,Z,"Column");var k;k=s;class Jn{constructor(e,t,n){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(Jn,k,"ColumnBuilder");const C=Symbol.for("drizzle:Name");var ee;ee=s;class Wn{constructor(e,t){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:o}=e();return{name:n,columns:a,foreignTable:o[0].table,foreignColumns:o}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Hn(e,this)}}i(Wn,ee,"PgForeignKeyBuilder");var te;te=s;class Hn{constructor(e,t){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),a=t.map(d=>d.name),o=n.map(d=>d.name),l=[this.table[C],...a,n[0].table[C],...o];return e??`${l.join("_")}_fk`}}i(Hn,te,"PgForeignKey");function Xs(r,...e){return r(...e)}function Gs(r,e){return`${r[C]}_${e.join("_")}_unique`}function K(r,e,t){for(let n=e;n<r.length;n++){const a=r[n];if(a==="\\"){n++;continue}if(a==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(a===","||a==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function Yn(r,e=0){const t=[];let n=e,a=!1;for(;n<r.length;){const o=r[n];if(o===","){(a||n===e)&&t.push(""),a=!0,n++;continue}if(a=!1,o==="\\"){n+=2;continue}if(o==='"'){const[g,f]=K(r,n+1,!0);t.push(g),n=f;continue}if(o==="}")return[t,n+1];if(o==="{"){const[g,f]=Yn(r,n+1);t.push(g),n=f;continue}const[l,d]=K(r,n,!1);t.push(l),n=d}return[t,n]}function Ks(r){const[e]=Yn(r,1);return e}function Zn(r){return`{${r.map(e=>Array.isArray(e)?Zn(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var re,ne;class m extends(ne=Jn,re=s,ne){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(t){return new ei(this.config.name,this,t)}references(t,n={}){return this.foreignKeyConfigs.push({ref:t,actions:n}),this}unique(t,n){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,n){return this.foreignKeyConfigs.map(({ref:a,actions:o})=>Xs((l,d)=>{const g=new Wn(()=>{const f=l();return{columns:[t],foreignColumns:[f]}});return d.onUpdate&&g.onUpdate(d.onUpdate),d.onDelete&&g.onDelete(d.onDelete),g.build(n)},a,o))}buildExtraConfigColumn(t){return new kn(t,this.config)}}i(m,re,"PgColumnBuilder");var ie,se;class c extends(se=B,ie=s,se){constructor(e,t){t.uniqueName||(t.uniqueName=Gs(e,[t.name])),super(e,t),this.table=e}}i(c,ie,"PgColumn");var ae,oe;class kn extends(oe=c,ae=s,oe){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}i(kn,ae,"ExtraConfigColumn");var ue,le;class ei extends(le=m,ue=s,le){constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new U(e,this.config,t)}}i(ei,ue,"PgArrayBuilder");var ce,me;const q=class q extends(me=c,ce=s,me){constructor(t,n,a,o){super(t,n);i(this,"size");this.baseColumn=a,this.range=o,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=Ks(t)),t.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(t,n=!1){const a=t.map(o=>o===null?null:P(this.baseColumn,q)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return n?a:Zn(a)}};i(q,ce,"PgArray");let U=q;const j=Symbol.for("drizzle:isPgEnum");function Rs(r){return!!r&&typeof r=="function"&&j in r&&r[j]===!0}var ge,de;class ti extends(de=m,ge=s,de){constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new ri(e,this.config)}}i(ti,ge,"PgEnumColumnBuilder");var pe,fe;class ri extends(fe=c,pe=s,fe){constructor(t,n){super(t,n);i(this,"enum",this.config.enum);i(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}}i(ri,pe,"PgEnumColumn");function Ka(r,e){return Js(r,e,void 0)}function Js(r,e,t){const n=Object.assign(a=>new ti(a??"",n),{enumName:r,enumValues:e,schema:t,[j]:!0});return n}var he;he=s;class X{constructor(e,t,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:a}}}i(X,he,"Subquery");const Ws={startActiveSpan(r,e){return e()}},V=Symbol.for("drizzle:ViewBaseConfig"),M=Symbol.for("drizzle:Schema"),R=Symbol.for("drizzle:Columns"),J=Symbol.for("drizzle:ExtraConfigColumns"),E=Symbol.for("drizzle:OriginalName"),$=Symbol.for("drizzle:BaseName"),A=Symbol.for("drizzle:IsAlias"),W=Symbol.for("drizzle:ExtraConfigBuilder"),ni=Symbol.for("drizzle:IsDrizzleTable");var ye,be,Se,Te,Pe,Ne,we,Ie,xe,De;De=s,xe=C,Ie=E,we=M,Ne=R,Pe=J,Te=$,Se=A,be=ni,ye=W;class N{constructor(e,t,n){i(this,xe);i(this,Ie);i(this,we);i(this,Ne);i(this,Pe);i(this,Te);i(this,Se,!1);i(this,be,!0);i(this,ye);this[C]=this[E]=e,this[M]=t,this[$]=n}}i(N,De,"Table"),i(N,"Symbol",{Name:C,Schema:M,OriginalName:E,Columns:R,ExtraConfigColumns:J,BaseName:$,IsAlias:A,ExtraConfigBuilder:W});function ii(r){return typeof r=="object"&&r!==null&&ni in r}function Hs(r){return r!=null&&typeof r.getSQL=="function"}function Ys(r){var t;const e={sql:"",params:[]};for(const n of r)e.sql+=n.sql,e.params.push(...n.params),(t=n.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Ce;Ce=s;class I{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new b([this])}}i(I,Ce,"StringChunk");var Ve;Ve=s;const D=class D{constructor(e){i(this,"decoder",si);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ws.startActiveSpan("drizzle.buildSQL",t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){const n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:l,prepareTyping:d,inlineParams:g,paramStartIndex:f}=n;return Ys(e.map(u=>{var x;if(P(u,I))return{sql:u.value.join(""),params:[]};if(P(u,L))return{sql:o(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const p=[new I("(")];for(const[S,Us]of u.entries())p.push(Us),S<u.length-1&&p.push(new I(", "));return p.push(new I(")")),this.buildQueryFromSourceParams(p,n)}if(P(u,D))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:g||u.shouldInlineParams});if(P(u,N)){const p=u[N.Symbol.Schema],S=u[N.Symbol.Name];return{sql:p===void 0||u[A]?o(S):o(p)+"."+o(S),params:[]}}if(P(u,B)){const p=a.getColumnCasing(u);if(t.invokeSource==="indexes")return{sql:o(p),params:[]};const S=u.table[N.Symbol.Schema];return{sql:u.table[A]||S===void 0?o(u.table[N.Symbol.Name])+"."+o(p):o(S)+"."+o(u.table[N.Symbol.Name])+"."+o(p),params:[]}}if(P(u,ui)){const p=u[V].schema,S=u[V].name;return{sql:p===void 0||u[V].isAlias?o(S):o(p)+"."+o(S),params:[]}}if(P(u,G)){if(P(u.value,Q))return{sql:l(f.value++,u),params:[u],typings:["none"]};const p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(P(p,D))return this.buildQueryFromSourceParams([p],n);if(g)return{sql:this.mapInlineParam(p,n),params:[]};let S=["none"];return d&&(S=[d(u.encoder)]),{sql:l(f.value++,p),params:[p],typings:S}}return P(u,Q)?{sql:l(f.value++,u),params:[u],typings:["none"]}:P(u,D.Aliased)&&u.fieldAlias!==void 0?{sql:o(u.fieldAlias),params:[]}:P(u,X)?u._.isWith?{sql:o(u._.alias),params:[]}:this.buildQueryFromSourceParams([new I("("),u._.sql,new I(") "),new L(u._.alias)],n):Rs(u)?u.schema?{sql:o(u.schema)+"."+o(u.enumName),params:[]}:{sql:o(u.enumName),params:[]}:Hs(u)?(x=u.shouldOmitSQLParens)!=null&&x.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new I("("),u.getSQL(),new I(")")],n):g?{sql:this.mapInlineParam(u,n),params:[]}:{sql:l(f.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new D.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(D,Ve,"SQL");let b=D;var Be;Be=s;class L{constructor(e){i(this,"brand");this.value=e}getSQL(){return new b([this])}}i(L,Be,"Name");const si={mapFromDriverValue:r=>r},ai={mapToDriverValue:r=>r};({...si,...ai});var Fe;Fe=s;class G{constructor(e,t=ai){i(this,"brand");this.value=e,this.encoder=t}getSQL(){return new b([this])}}i(G,Fe,"Param");function z(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new I(r[0]));for(const[n,a]of e.entries())t.push(a,new I(r[n+1]));return new b(t)}(r=>{function e(){return new b([])}r.empty=e;function t(g){return new b(g)}r.fromList=t;function n(g){return new b([new I(g)])}r.raw=n;function a(g,f){const u=[];for(const[x,p]of g.entries())x>0&&f!==void 0&&u.push(f),u.push(p);return new b(u)}r.join=a;function o(g){return new L(g)}r.identifier=o;function l(g){return new Q(g)}r.placeholder=l;function d(g,f){return new G(g,f)}r.param=d})(z||(z={}));(r=>{var t;t=s;const n=class n{constructor(o,l){i(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};i(n,t,"SQL.Aliased");let e=n;r.Aliased=e})(b||(b={}));var ve;ve=s;class Q{constructor(e){this.name=e}getSQL(){return new b([this])}}i(Q,ve,"Placeholder");const oi=Symbol.for("drizzle:IsDrizzleView");var Ae,Le,ze;ze=s,Le=V,Ae=oi;class ui{constructor({name:e,schema:t,selectedFields:n,query:a}){i(this,Le);i(this,Ae,!0);this[V]={name:e,originalName:e,schema:t,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new b([this])}}i(ui,ze,"View");function Zs(r){return typeof r=="object"&&r!==null&&oi in r}B.prototype.getSQL=function(){return new b([this])};N.prototype.getSQL=function(){return new b([this])};X.prototype.getSQL=function(){return new b([this])};function ks(r){return r[N.Symbol.Columns]}function ea(r){return r[V].selectedFields}function T(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}var Qe,_e;class v extends(_e=m,Qe=s,_e){generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(v,Qe,"PgIntColumnBaseBuilder");var qe,Me;class li extends(Me=v,qe=s,Me){constructor(e){super(e,"number","PgBigInt53")}build(e){return new ci(e,this.config)}}i(li,qe,"PgBigInt53Builder");var Ee,$e;class ci extends($e=c,Ee=s,$e){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(ci,Ee,"PgBigInt53");var Ue,je;class mi extends(je=v,Ue=s,je){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new gi(e,this.config)}}i(mi,Ue,"PgBigInt64Builder");var Oe,Xe;class gi extends(Xe=c,Oe=s,Xe){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(gi,Oe,"PgBigInt64");function ta(r,e){const{name:t,config:n}=T(r,e);return n.mode==="number"?new li(t):new mi(t)}var Ge,Ke;class di extends(Ke=m,Ge=s,Ke){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pi(e,this.config)}}i(di,Ge,"PgBigSerial53Builder");var Re,Je;class pi extends(Je=c,Re=s,Je){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(pi,Re,"PgBigSerial53");var We,He;class fi extends(He=m,We=s,He){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new hi(e,this.config)}}i(fi,We,"PgBigSerial64Builder");var Ye,Ze;class hi extends(Ze=c,Ye=s,Ze){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(hi,Ye,"PgBigSerial64");function ra(r,e){const{name:t,config:n}=T(r,e);return n.mode==="number"?new di(t):new fi(t)}var ke,et;class yi extends(et=m,ke=s,et){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new bi(e,this.config)}}i(yi,ke,"PgBooleanBuilder");var tt,rt;class bi extends(rt=c,tt=s,rt){getSQLType(){return"boolean"}}i(bi,tt,"PgBoolean");function na(r){return new yi(r??"")}var nt,it;class Si extends(it=m,nt=s,it){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Ti(e,this.config)}}i(Si,nt,"PgCharBuilder");var st,at;class Ti extends(at=c,st=s,at){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Ti,st,"PgChar");function ia(r,e={}){const{name:t,config:n}=T(r,e);return new Si(t,n)}var ot,ut;class Pi extends(ut=m,ot=s,ut){constructor(e){super(e,"string","PgCidr")}build(e){return new Ni(e,this.config)}}i(Pi,ot,"PgCidrBuilder");var lt,ct;class Ni extends(ct=c,lt=s,ct){getSQLType(){return"cidr"}}i(Ni,lt,"PgCidr");function sa(r){return new Pi(r??"")}var mt,gt;class wi extends(gt=m,mt=s,gt){constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new Ii(e,this.config)}}i(wi,mt,"PgCustomColumnBuilder");var dt,pt;class Ii extends(pt=c,dt=s,pt){constructor(t,n){super(t,n);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}i(Ii,dt,"PgCustomColumn");function aa(r){return(e,t)=>{const{name:n,config:a}=T(e,t);return new wi(n,a,r)}}var ft,ht;class F extends(ht=m,ft=s,ht){defaultNow(){return this.default(z`now()`)}}i(F,ft,"PgDateColumnBaseBuilder");var yt,bt;class xi extends(bt=F,yt=s,bt){constructor(e){super(e,"date","PgDate")}build(e){return new Di(e,this.config)}}i(xi,yt,"PgDateBuilder");var St,Tt;class Di extends(Tt=c,St=s,Tt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(Di,St,"PgDate");var Pt,Nt;class Ci extends(Nt=F,Pt=s,Nt){constructor(e){super(e,"string","PgDateString")}build(e){return new Vi(e,this.config)}}i(Ci,Pt,"PgDateStringBuilder");var wt,It;class Vi extends(It=c,wt=s,It){getSQLType(){return"date"}}i(Vi,wt,"PgDateString");function oa(r,e){const{name:t,config:n}=T(r,e);return(n==null?void 0:n.mode)==="date"?new xi(t):new Ci(t)}var xt,Dt;class Bi extends(Dt=m,xt=s,Dt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Fi(e,this.config)}}i(Bi,xt,"PgDoublePrecisionBuilder");var Ct,Vt;class Fi extends(Vt=c,Ct=s,Vt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(Fi,Ct,"PgDoublePrecision");function ua(r){return new Bi(r??"")}var Bt,Ft;class vi extends(Ft=m,Bt=s,Ft){constructor(e){super(e,"string","PgInet")}build(e){return new Ai(e,this.config)}}i(vi,Bt,"PgInetBuilder");var vt,At;class Ai extends(At=c,vt=s,At){getSQLType(){return"inet"}}i(Ai,vt,"PgInet");function la(r){return new vi(r??"")}var Lt,zt;class Li extends(zt=v,Lt=s,zt){constructor(e){super(e,"number","PgInteger")}build(e){return new zi(e,this.config)}}i(Li,Lt,"PgIntegerBuilder");var Qt,_t;class zi extends(_t=c,Qt=s,_t){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(zi,Qt,"PgInteger");function ca(r){return new Li(r??"")}var qt,Mt;class Qi extends(Mt=m,qt=s,Mt){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new _i(e,this.config)}}i(Qi,qt,"PgIntervalBuilder");var Et,$t;class _i extends($t=c,Et=s,$t){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${t}${n}`}}i(_i,Et,"PgInterval");function ma(r,e={}){const{name:t,config:n}=T(r,e);return new Qi(t,n)}var Ut,jt;class qi extends(jt=m,Ut=s,jt){constructor(e){super(e,"json","PgJson")}build(e){return new Mi(e,this.config)}}i(qi,Ut,"PgJsonBuilder");var Ot,Xt;class Mi extends(Xt=c,Ot=s,Xt){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(Mi,Ot,"PgJson");function ga(r){return new qi(r??"")}var Gt,Kt;class Ei extends(Kt=m,Gt=s,Kt){constructor(e){super(e,"json","PgJsonb")}build(e){return new $i(e,this.config)}}i(Ei,Gt,"PgJsonbBuilder");var Rt,Jt;class $i extends(Jt=c,Rt=s,Jt){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i($i,Rt,"PgJsonb");function da(r){return new Ei(r??"")}var Wt,Ht;class Ui extends(Ht=m,Wt=s,Ht){constructor(e){super(e,"array","PgLine")}build(e){return new ji(e,this.config)}}i(Ui,Wt,"PgLineBuilder");var Yt,Zt;class ji extends(Zt=c,Yt=s,Zt){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(ji,Yt,"PgLine");var kt,er;class Oi extends(er=m,kt=s,er){constructor(e){super(e,"json","PgLineABC")}build(e){return new Xi(e,this.config)}}i(Oi,kt,"PgLineABCBuilder");var tr,rr;class Xi extends(rr=c,tr=s,rr){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(Xi,tr,"PgLineABC");function pa(r,e){const{name:t,config:n}=T(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Ui(t):new Oi(t)}var nr,ir;class Gi extends(ir=m,nr=s,ir){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Ki(e,this.config)}}i(Gi,nr,"PgMacaddrBuilder");var sr,ar;class Ki extends(ar=c,sr=s,ar){getSQLType(){return"macaddr"}}i(Ki,sr,"PgMacaddr");function fa(r){return new Gi(r??"")}var or,ur;class Ri extends(ur=m,or=s,ur){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Ji(e,this.config)}}i(Ri,or,"PgMacaddr8Builder");var lr,cr;class Ji extends(cr=c,lr=s,cr){getSQLType(){return"macaddr8"}}i(Ji,lr,"PgMacaddr8");function ha(r){return new Ri(r??"")}var mr,gr;class Wi extends(gr=m,mr=s,gr){constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new Hi(e,this.config)}}i(Wi,mr,"PgNumericBuilder");var dr,pr;class Hi extends(pr=c,dr=s,pr){constructor(t,n){super(t,n);i(this,"precision");i(this,"scale");this.precision=n.precision,this.scale=n.scale}mapFromDriverValue(t){return typeof t=="string"?t:String(t)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(Hi,dr,"PgNumeric");var fr,hr;class Yi extends(hr=m,fr=s,hr){constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new Zi(e,this.config)}}i(Yi,fr,"PgNumericNumberBuilder");var yr,br;class Zi extends(br=c,yr=s,br){constructor(t,n){super(t,n);i(this,"precision");i(this,"scale");i(this,"mapToDriverValue",String);this.precision=n.precision,this.scale=n.scale}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(Zi,yr,"PgNumericNumber");var Sr,Tr;class ki extends(Tr=m,Sr=s,Tr){constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new es(e,this.config)}}i(ki,Sr,"PgNumericBigIntBuilder");var Pr,Nr;class es extends(Nr=c,Pr=s,Nr){constructor(t,n){super(t,n);i(this,"precision");i(this,"scale");i(this,"mapFromDriverValue",BigInt);i(this,"mapToDriverValue",String);this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(es,Pr,"PgNumericBigInt");function ya(r,e){const{name:t,config:n}=T(r,e),a=n==null?void 0:n.mode;return a==="number"?new Yi(t,n==null?void 0:n.precision,n==null?void 0:n.scale):a==="bigint"?new ki(t,n==null?void 0:n.precision,n==null?void 0:n.scale):new Wi(t,n==null?void 0:n.precision,n==null?void 0:n.scale)}var wr,Ir;class ts extends(Ir=m,wr=s,Ir){constructor(e){super(e,"array","PgPointTuple")}build(e){return new rs(e,this.config)}}i(ts,wr,"PgPointTupleBuilder");var xr,Dr;class rs extends(Dr=c,xr=s,Dr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(rs,xr,"PgPointTuple");var Cr,Vr;class ns extends(Vr=m,Cr=s,Vr){constructor(e){super(e,"json","PgPointObject")}build(e){return new is(e,this.config)}}i(ns,Cr,"PgPointObjectBuilder");var Br,Fr;class is extends(Fr=c,Br=s,Fr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(is,Br,"PgPointObject");function ba(r,e){const{name:t,config:n}=T(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new ts(t):new ns(t)}function Sa(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function H(r,e){const t=new ArrayBuffer(8),n=new DataView(t);for(let a=0;a<8;a++)n.setUint8(a,r[e+a]);return n.getFloat64(0,!0)}function ss(r){const e=Sa(r);let t=0;const n=e[t];t+=1;const a=new DataView(e.buffer),o=a.getUint32(t,n===1);if(t+=4,o&536870912&&(a.getUint32(t,n===1),t+=4),(o&65535)===1){const l=H(e,t);t+=8;const d=H(e,t);return t+=8,[l,d]}throw new Error("Unsupported geometry type")}var vr,Ar;class as extends(Ar=m,vr=s,Ar){constructor(e){super(e,"array","PgGeometry")}build(e){return new os(e,this.config)}}i(as,vr,"PgGeometryBuilder");var Lr,zr;class os extends(zr=c,Lr=s,zr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ss(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(os,Lr,"PgGeometry");var Qr,_r;class us extends(_r=m,Qr=s,_r){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ls(e,this.config)}}i(us,Qr,"PgGeometryObjectBuilder");var qr,Mr;class ls extends(Mr=c,qr=s,Mr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=ss(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(ls,qr,"PgGeometryObject");function Ta(r,e){const{name:t,config:n}=T(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new as(t):new us(t)}var Er,$r;class cs extends($r=m,Er=s,$r){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new ms(e,this.config)}}i(cs,Er,"PgRealBuilder");var Ur,jr;class ms extends(jr=c,Ur=s,jr){constructor(t,n){super(t,n);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}i(ms,Ur,"PgReal");function Pa(r){return new cs(r??"")}var Or,Xr;class gs extends(Xr=m,Or=s,Xr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ds(e,this.config)}}i(gs,Or,"PgSerialBuilder");var Gr,Kr;class ds extends(Kr=c,Gr=s,Kr){getSQLType(){return"serial"}}i(ds,Gr,"PgSerial");function Na(r){return new gs(r??"")}var Rr,Jr;class ps extends(Jr=v,Rr=s,Jr){constructor(e){super(e,"number","PgSmallInt")}build(e){return new fs(e,this.config)}}i(ps,Rr,"PgSmallIntBuilder");var Wr,Hr;class fs extends(Hr=c,Wr=s,Hr){constructor(){super(...arguments);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}i(fs,Wr,"PgSmallInt");function wa(r){return new ps(r??"")}var Yr,Zr;class hs extends(Zr=m,Yr=s,Zr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ys(e,this.config)}}i(hs,Yr,"PgSmallSerialBuilder");var kr,en;class ys extends(en=c,kr=s,en){getSQLType(){return"smallserial"}}i(ys,kr,"PgSmallSerial");function Ia(r){return new hs(r??"")}var tn,rn;class bs extends(rn=m,tn=s,rn){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Ss(e,this.config)}}i(bs,tn,"PgTextBuilder");var nn,sn;class Ss extends(sn=c,nn=s,sn){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(Ss,nn,"PgText");function xa(r,e={}){const{name:t,config:n}=T(r,e);return new bs(t,n)}var an,on;class Ts extends(on=F,an=s,on){constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new Ps(e,this.config)}}i(Ts,an,"PgTimeBuilder");var un,ln;class Ps extends(ln=c,un=s,ln){constructor(t,n){super(t,n);i(this,"withTimezone");i(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ps,un,"PgTime");function Da(r,e={}){const{name:t,config:n}=T(r,e);return new Ts(t,n.withTimezone??!1,n.precision)}var cn,mn;class Ns extends(mn=F,cn=s,mn){constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ws(e,this.config)}}i(Ns,cn,"PgTimestampBuilder");var gn,dn;class ws extends(dn=c,gn=s,dn){constructor(t,n){super(t,n);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));i(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(ws,gn,"PgTimestamp");var pn,fn;class Is extends(fn=F,pn=s,fn){constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new xs(e,this.config)}}i(Is,pn,"PgTimestampStringBuilder");var hn,yn;class xs extends(yn=c,hn=s,yn){constructor(t,n){super(t,n);i(this,"withTimezone");i(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(xs,hn,"PgTimestampString");function Ca(r,e={}){const{name:t,config:n}=T(r,e);return(n==null?void 0:n.mode)==="string"?new Is(t,n.withTimezone??!1,n.precision):new Ns(t,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var bn,Sn;class Ds extends(Sn=m,bn=s,Sn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(z`gen_random_uuid()`)}build(e){return new Cs(e,this.config)}}i(Ds,bn,"PgUUIDBuilder");var Tn,Pn;class Cs extends(Pn=c,Tn=s,Pn){getSQLType(){return"uuid"}}i(Cs,Tn,"PgUUID");function Va(r){return new Ds(r??"")}var Nn,wn;class Vs extends(wn=m,Nn=s,wn){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Bs(e,this.config)}}i(Vs,Nn,"PgVarcharBuilder");var In,xn;class Bs extends(xn=c,In=s,xn){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(Bs,In,"PgVarchar");function Ba(r,e={}){const{name:t,config:n}=T(r,e);return new Vs(t,n)}var Dn,Cn;class Fs extends(Cn=m,Dn=s,Cn){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new vs(e,this.config)}}i(Fs,Dn,"PgBinaryVectorBuilder");var Vn,Bn;class vs extends(Bn=c,Vn=s,Bn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(vs,Vn,"PgBinaryVector");function Fa(r,e){const{name:t,config:n}=T(r,e);return new Fs(t,n)}var Fn,vn;class As extends(vn=m,Fn=s,vn){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Ls(e,this.config)}}i(As,Fn,"PgHalfVectorBuilder");var An,Ln;class Ls extends(Ln=c,An=s,Ln){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}i(Ls,An,"PgHalfVector");function va(r,e){const{name:t,config:n}=T(r,e);return new As(t,n)}var zn,Qn;class zs extends(Qn=m,zn=s,Qn){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new Qs(e,this.config)}}i(zs,zn,"PgSparseVectorBuilder");var _n,qn;class Qs extends(qn=c,_n=s,qn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(Qs,_n,"PgSparseVector");function Aa(r,e){const{name:t,config:n}=T(r,e);return new zs(t,n)}var Mn,En;class _s extends(En=m,Mn=s,En){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new qs(e,this.config)}}i(_s,Mn,"PgVectorBuilder");var $n,Un;class qs extends(Un=c,$n=s,Un){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}i(qs,$n,"PgVector");function La(r,e){const{name:t,config:n}=T(r,e);return new _s(t,n)}function za(){return{bigint:ta,bigserial:ra,boolean:na,char:ia,cidr:sa,customType:aa,date:oa,doublePrecision:ua,inet:la,integer:ca,interval:ma,json:ga,jsonb:da,line:pa,macaddr:fa,macaddr8:ha,numeric:ya,point:ba,geometry:Ta,real:Pa,serial:Na,smallint:wa,smallserial:Ia,text:xa,time:Da,timestamp:Ca,uuid:Va,varchar:Ba,bit:Fa,halfvec:va,sparsevec:Aa,vector:La}}const O=Symbol.for("drizzle:PgInlineForeignKeys"),Y=Symbol.for("drizzle:EnableRLS");var jn,On,Xn,Gn,Kn,Rn;class _ extends(Rn=N,Kn=s,Gn=O,Xn=Y,On=N.Symbol.ExtraConfigBuilder,jn=N.Symbol.ExtraConfigColumns,Rn){constructor(){super(...arguments);i(this,Gn,[]);i(this,Xn,!1);i(this,On);i(this,jn,{})}}i(_,Kn,"PgTable"),i(_,"Symbol",Object.assign({},N.Symbol,{InlineForeignKeys:O,EnableRLS:Y}));function Qa(r,e,t,n,a=r){const o=new _(r,n,a),l=typeof e=="function"?e(za()):e,d=Object.fromEntries(Object.entries(l).map(([u,x])=>{const p=x;p.setName(u);const S=p.build(o);return o[O].push(...p.buildForeignKeys(S,o)),[u,S]})),g=Object.fromEntries(Object.entries(l).map(([u,x])=>{const p=x;p.setName(u);const S=p.buildExtraConfigColumn(o);return[u,S]})),f=Object.assign(o,d);return f[N.Symbol.Columns]=d,f[N.Symbol.ExtraConfigColumns]=g,Object.assign(f,{enableRLS:()=>(f[_.Symbol.EnableRLS]=!0,f)})}const Ra=(r,e,t)=>Qa(r,e,t,void 0),h={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function y(r,e){return e.includes(r.columnType)}function _a(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}const qa=w.union([w.string(),w.number(),w.boolean(),w.null()]),Ma=w.union([qa,w.record(w.any()),w.array(w.any())]),Ea=w.custom(r=>r instanceof Buffer);function Ms(r,e){const t=(e==null?void 0:e.zodInstance)??w,n=(e==null?void 0:e.coerce)??{};let a;return _a(r)&&(a=r.enumValues.length?t.enum(r.enumValues):t.string()),a||(y(r,["PgGeometry","PgPointTuple"])?a=t.tuple([t.number(),t.number()]):y(r,["PgGeometryObject","PgPointObject"])?a=t.object({x:t.number(),y:t.number()}):y(r,["PgHalfVector","PgVector"])?(a=t.array(t.number()),a=r.dimensions?a.length(r.dimensions):a):y(r,["PgLine"])?a=t.tuple([t.number(),t.number(),t.number()]):y(r,["PgLineABC"])?a=t.object({a:t.number(),b:t.number(),c:t.number()}):y(r,["PgArray"])?(a=t.array(Ms(r.baseColumn,t)),a=r.size?a.length(r.size):a):r.dataType==="array"?a=t.array(t.any()):r.dataType==="number"?a=$a(r,t,n):r.dataType==="bigint"?a=Ua(r,t,n):r.dataType==="boolean"?a=n===!0||n.boolean?t.coerce.boolean():t.boolean():r.dataType==="date"?a=n===!0||n.date?t.coerce.date():t.date():r.dataType==="string"?a=ja(r,t,n):r.dataType==="json"?a=Ma:r.dataType==="custom"?a=t.any():r.dataType==="buffer"&&(a=Ea)),a||(a=t.any()),a}function $a(r,e,t){let n=r.getSQLType().includes("unsigned"),a,o,l=!1;y(r,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:h.INT8_MIN,o=n?h.INT8_UNSIGNED_MAX:h.INT8_MAX,l=!0):y(r,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:h.INT16_MIN,o=n?h.INT16_UNSIGNED_MAX:h.INT16_MAX,l=!0):y(r,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:h.INT24_MIN,o=n?h.INT24_UNSIGNED_MAX:h.INT24_MAX,l=y(r,["MySqlMediumInt","SingleStoreMediumInt"])):y(r,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:h.INT32_MIN,o=n?h.INT32_UNSIGNED_MAX:h.INT32_MAX,l=!0):y(r,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:h.INT48_MIN,o=n?h.INT48_UNSIGNED_MAX:h.INT48_MAX):y(r,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||y(r,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,l=!0):y(r,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,l=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let d=t===!0||t!=null&&t.number?e.coerce.number():e.number();return d=d.min(a).max(o),l?d.int():d}function Ua(r,e,t){const n=r.getSQLType().includes("unsigned"),a=n?0n:h.INT64_MIN,o=n?h.INT64_UNSIGNED_MAX:h.INT64_MAX;return(t===!0||t!=null&&t.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function ja(r,e,t){if(y(r,["PgUUID"]))return e.string().uuid();let n,a,o=!1;y(r,["PgVarchar","SQLiteText"])?n=r.length:y(r,["MySqlVarChar","SingleStoreVarChar"])?n=r.length??h.INT16_UNSIGNED_MAX:y(r,["MySqlText","SingleStoreText"])&&(r.textType==="longtext"?n=h.INT32_UNSIGNED_MAX:r.textType==="mediumtext"?n=h.INT24_UNSIGNED_MAX:r.textType==="text"?n=h.INT16_UNSIGNED_MAX:n=h.INT8_UNSIGNED_MAX),y(r,["PgChar","MySqlChar","SingleStoreChar"])&&(n=r.length,o=!0),y(r,["PgBinaryVector"])&&(a=/^[01]+$/,n=r.dimensions);let l=t===!0||t!=null&&t.string?e.coerce.string():e.string();return l=a?l.regex(a):l,n&&o?l.length(n):n?l.max(n):l}function Es(r){return ii(r)?ks(r):ea(r)}function $s(r,e,t,n){const a={};for(const[o,l]of Object.entries(r)){if(!P(l,B)&&!P(l,b)&&!P(l,b.Aliased)&&typeof l=="object"){const x=ii(l)||Zs(l)?Es(l):l;a[o]=$s(x,e[o]??{},t,n);continue}const d=e[o];if(d!==void 0&&typeof d!="function"){a[o]=d;continue}const g=P(l,B)?l:void 0,f=g?Ms(g,n):w.any(),u=typeof d=="function"?d(f):f;t.never(g)||(a[o]=u,g&&(t.nullable(g)&&(a[o]=a[o].nullable()),t.optional(g)&&(a[o]=a[o].optional())))}return w.object(a)}const Oa={never:r=>{var e,t;return((e=r==null?void 0:r.generated)==null?void 0:e.type)==="always"||((t=r==null?void 0:r.generatedIdentity)==null?void 0:t.type)==="always"},optional:r=>!r.notNull||r.notNull&&r.hasDefault,nullable:r=>!r.notNull},Ja=(r,e)=>{const t=Es(r);return $s(t,{},Oa)};export{Ra as a,na as b,xa as c,Ja as d,Ka as p,Na as s,Ca as t};
