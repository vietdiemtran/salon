import{f as p,c as P,j as e,r as F}from"./index-Dj3cS6za.js";import{A as M,a as _,b as Z}from"./avatar-OeQvn9_O.js";import{B as T}from"./button-Crtod_yx.js";import{C as y,b as N,c as b,d as L,a as v,e as V}from"./card-C8qa4OaK.js";import{u}from"./useQuery-Q6h1jA1k.js";import{L as w}from"./loader-circle-Bl7EfNa1.js";import{C as U}from"./clock-DnPIcnCy.js";import{U as z,S as C}from"./skeleton-Bzpb_Sqk.js";import{S as W}from"./scissors-DC2aMT_D.js";import{P as q}from"./plus-gjNRdYAo.js";import{R as D,B as X,C as E,X as G,Y as O,T as I,b as Q,P as Y,c as J,d as ee,L as te,A as ae,a as se}from"./PieChart-5OnbAJyJ.js";import{P as ne}from"./progress-BsHtMarn.js";import{U as K}from"./users-BJxinZlE.js";import{C as A}from"./calendar-B3ImGPjP.js";import"./index-BhW-rcdq.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],S=p("award",re);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]],ie=p("calendar-plus",ce);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],le=p("circle-check-big",de);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],me=p("circle-x",oe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ue=p("dollar-sign",he);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xe=p("refresh-cw",pe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],k=p("star",ge);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],$=p("trophy",fe);function ye({appointments:d,isLoading:m=!1,showTitle:h=!0,showViewAll:i=!0}){const t=P(),o=s=>{switch(s){case"confirmed":return"bg-green-50 text-green-700 border border-green-300 px-3 py-1 rounded-full text-xs font-medium";case"pending":return"bg-yellow-50 text-yellow-700 border border-yellow-300 px-3 py-1 rounded-full text-xs font-medium";case"cancelled":return"bg-red-50 text-red-700 border border-red-300 px-3 py-1 rounded-full text-xs font-medium";case"completed":return"bg-blue-50 text-blue-700 border border-blue-300 px-3 py-1 rounded-full text-xs font-medium";default:return"bg-gray-50 text-gray-700 border border-gray-300 px-3 py-1 rounded-full text-xs font-medium"}},n=s=>{switch(s){case"confirmed":return"Đã xác nhận";case"completed":return"Hoàn thành";case"cancelled":return"Đã hủy";case"pending":return"Đang chờ";default:return s}},r=s=>(typeof s=="string"?new Date(s):s).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),{data:a}=u({queryKey:["/api/users"]}),{data:l}=u({queryKey:["/api/services"]}),f=s=>{const c=a==null?void 0:a.find(g=>g.id===s);return c?`${c.firstName} ${c.lastName}`:`Khách hàng #${s}`},x=s=>{const c=a==null?void 0:a.find(g=>g.id===s);return c?`${c.firstName} ${c.lastName}`:`Nhân viên #${s}`},H=s=>{const c=l==null?void 0:l.find(g=>g.id===s);return c?c.name:`Dịch vụ #${s}`};return e.jsxs(y,{className:"overflow-hidden",children:[h&&e.jsxs(N,{className:"flex flex-row items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(b,{className:"font-heading text-xl font-bold",children:"Lịch hẹn hôm nay"}),e.jsx(L,{children:d.length>0?`${d.length} lịch hẹn hôm nay`:"Không có lịch hẹn nào hôm nay"})]}),i&&e.jsx(T,{variant:"link",className:"text-pink-500 hover:text-pink-600",onClick:()=>t("/appointments"),children:"Xem tất cả"})]}),e.jsx(v,{className:"p-0",children:m?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):d.length>0?e.jsx("div",{className:"divide-y",children:d.map(s=>{const c=a==null?void 0:a.find(B=>B.id===s.userId),g=c?`${c.firstName.charAt(0)}${c.lastName.charAt(0)}`.toUpperCase():"KH",R=s.status==="confirmed"?"border-l-4 border-l-green-500":s.status==="pending"?"border-l-4 border-l-yellow-500":s.status==="cancelled"?"border-l-4 border-l-red-500":"";return e.jsxs("div",{className:`flex px-6 py-4 ${R}`,children:[e.jsxs(M,{className:"mr-4 h-16 w-16 rounded-full",children:[e.jsx(_,{src:(c==null?void 0:c.profileImage)||"",alt:f(s.userId)}),e.jsx(Z,{className:"bg-primary text-lg text-white",children:g})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-start justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:f(s.userId)}),e.jsx("span",{className:o(s.status),children:n(s.status)})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-neutral-600 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"mr-2 h-4 w-4 text-neutral-500"}),r(s.date)," -"," ",r(new Date(new Date(s.date).getTime()+60*60*1e3))]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4 text-neutral-500"}),x(s.staffId||0)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"mr-2 h-4 w-4 text-neutral-500"}),H(s.serviceId)]})]})]})]},s.id)})}):e.jsx("div",{className:"py-10 text-center",children:e.jsx("p",{className:"text-neutral-500",children:"Không có lịch hẹn nào hôm nay"})})}),e.jsx(V,{className:"bg-neutral-50 p-4",children:e.jsxs(T,{className:"w-full",onClick:()=>t("/appointments"),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Thêm lịch hẹn mới"]})})]})}const ve=[{id:1,type:"appointment_created",title:"Cuộc hẹn mới được tạo",description:"Cuộc hẹn của bạn với ID 101 đã được tạo thành công.",createdAt:"2025-04-01T08:00:00Z",userId:101},{id:2,type:"appointment_completed",title:"Cuộc hẹn đã hoàn thành",description:"Cuộc hẹn của bạn với ID 102 đã được đánh dấu là hoàn thành.",createdAt:"2025-04-02T09:00:00Z",userId:102},{id:3,type:"appointment_cancelled",title:"Cuộc hẹn đã bị hủy",description:"Cuộc hẹn của bạn với ID 103 đã bị hủy.",createdAt:"2025-04-03T10:00:00Z",userId:103},{id:4,type:"promotion_added",title:"Khuyến mãi mới có sẵn",description:"Một khuyến mãi mới 'Spring Sale' đã được thêm. Hãy kiểm tra ngay!",createdAt:"2025-04-04T11:00:00Z",userId:104},{id:5,type:"customer_feedback",title:"Phản hồi từ khách hàng",description:"Bạn đã nhận được phản hồi cho cuộc hẹn gần đây của mình.",createdAt:"2025-04-05T12:00:00Z",userId:105},{id:6,type:"service_updated",title:"Dịch vụ đã được cập nhật",description:"Dịch vụ 'Cắt tóc' đã được cập nhật với giá mới.",createdAt:"2025-04-06T13:00:00Z",userId:106},{id:7,type:"appointment_created",title:"Cuộc hẹn mới được tạo",description:"Cuộc hẹn của bạn với ID 107 đã được tạo thành công.",createdAt:"2025-04-07T14:00:00Z",userId:107},{id:8,type:"appointment_completed",title:"Cuộc hẹn đã hoàn thành",description:"Cuộc hẹn của bạn với ID 108 đã được đánh dấu là hoàn thành.",createdAt:"2025-04-08T15:00:00Z",userId:108},{id:9,type:"promotion_added",title:"Khuyến mãi mới có sẵn",description:"Một khuyến mãi mới 'Summer Discount' đã được thêm. Đừng bỏ lỡ!",createdAt:"2025-04-09T16:00:00Z",userId:109},{id:10,type:"customer_feedback",title:"Phản hồi từ khách hàng",description:"Bạn đã nhận được phản hồi cho dịch vụ gần đây của mình.",createdAt:"2025-04-10T17:00:00Z",userId:110}];function je(){const{data:d=ve,isLoading:m}=u({queryKey:["/api/activities/recent"]}),h=t=>{switch(t){case"appointment_created":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary bg-opacity-10",children:e.jsx(ie,{className:"h-4 w-4 text-primary"})});case"appointment_completed":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 bg-opacity-10",children:e.jsx(le,{className:"h-4 w-4 text-green-500"})});case"appointment_cancelled":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-red-500 bg-opacity-10",children:e.jsx(me,{className:"h-4 w-4 text-red-500"})});case"promotion_added":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-purple-500 bg-opacity-10",children:e.jsx(q,{className:"h-4 w-4 text-purple-500"})});case"customer_feedback":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-amber-500 bg-opacity-10",children:e.jsx(k,{className:"h-4 w-4 text-amber-500"})});case"service_updated":return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 bg-opacity-10",children:e.jsx(xe,{className:"h-4 w-4 text-blue-500"})});default:return e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-100",children:e.jsx(w,{className:"h-4 w-4 text-gray-500"})})}},i=t=>{const o=new Date,n=new Date(t),r=Math.floor((o.getTime()-n.getTime())/(1e3*60));if(r<1)return"vừa xong";if(r<60)return`${r} phút trước`;const a=Math.floor(r/60);if(a<24)return`${a} giờ trước`;const l=Math.floor(a/24);return l<30?`${l} ngày trước`:`${Math.floor(l/30)} tháng trước`};return e.jsxs(y,{className:"overflow-hidden rounded-lg bg-white shadow",children:[e.jsx(N,{className:"border-neutral-light border-b px-4 py-3",children:e.jsx(b,{className:"font-heading text-neutral-dark font-semibold",children:"Hoạt động gần đây"})}),e.jsx(v,{className:"space-y-4 p-4",children:m?e.jsx(e.Fragment,{children:[1,2,3,4].map(t=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(C,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"h-4 w-40"}),e.jsx(C,{className:"h-3 w-32"})]})]},t))}):d.length>0?d.slice(0,5).map(t=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{children:h(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-dark text-sm font-medium",children:t.title}),e.jsx("p",{className:"text-neutral-mid text-sm",children:t.description}),e.jsx("p",{className:"text-neutral-mid mt-1 text-xs",children:i(t.createdAt)})]})]},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center py-6",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Không có hoạt động nào gần đây"})})})]})}const Ne=[{name:"Cắt tóc nam",count:120,revenue:24e5,percentage:25},{name:"Uốn tóc",count:80,revenue:32e5,percentage:20},{name:"Nhuộm tóc",count:60,revenue:36e5,percentage:30},{name:"Duỗi tóc",count:40,revenue:16e5,percentage:15},{name:"Gội đầu dưỡng sinh",count:50,revenue:12e5,percentage:10}];function be({services:d}){const[m,h]=F.useState("month"),{data:i=Ne,isLoading:t}=u({queryKey:["/api/services/stats",m]}),o=["#6A2C70","#8A4F96","#177E89","#1A9DAB","#125F67"],n=i.map(a=>({name:a.name,revenue:a.revenue/1e6})),r=i.map(a=>({name:a.name,value:a.percentage}));return e.jsxs(y,{className:"overflow-hidden rounded-lg bg-white shadow",children:[e.jsxs(N,{className:"border-neutral-light flex items-center justify-between border-b px-4 py-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"font-heading text-neutral-dark font-semibold",children:"Dịch vụ phổ biến"}),e.jsx(L,{children:"Thống kê doanh thu và lượt sử dụng theo dịch vụ"})]}),e.jsxs("select",{className:"border-none bg-transparent p-0 pr-6 text-sm focus:ring-0",value:m,onChange:a=>h(a.target.value),children:[e.jsx("option",{value:"month",children:"Tháng này"}),e.jsx("option",{value:"quarter",children:"Quý này"}),e.jsx("option",{value:"year",children:"Năm nay"})]})]}),e.jsx(v,{className:"p-4",children:t?e.jsx("div",{className:"flex h-72 items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):i.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:i.slice(0,5).map((a,l)=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-neutral-dark text-sm font-medium",children:a.name}),e.jsxs("span",{className:"text-neutral-mid ml-2 text-xs",children:[a.percentage,"%"]})]}),e.jsxs("span",{className:"text-neutral-mid text-xs",children:[a.count," lượt"]})]}),e.jsx("div",{className:"bg-neutral-light h-2 w-full rounded-full",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${a.percentage}%`,backgroundColor:o[l%o.length]}})})]},l))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-neutral-dark mb-3 text-sm font-medium",children:"Biểu đồ doanh thu theo dịch vụ"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 h-60",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(X,{data:n,margin:{top:10,right:10,left:0,bottom:20},children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(G,{dataKey:"name",tick:{fontSize:10}}),e.jsx(O,{tick:{fontSize:10}}),e.jsx(I,{formatter:a=>[`${a} triệu ₫`,"Doanh thu"],labelFormatter:a=>`Dịch vụ: ${a}`}),e.jsx(Q,{dataKey:"revenue",fill:"#6A2C70",radius:[4,4,0,0]})]})})}),e.jsx("div",{className:"aspect-w-16 aspect-h-9 h-60",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(Y,{children:[e.jsx(J,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:3,dataKey:"value",children:r.map((a,l)=>e.jsx(ee,{fill:o[l%o.length]},`cell-${l}`))}),e.jsx(I,{formatter:a=>`${a}%`}),e.jsx(te,{formatter:a=>e.jsx("span",{style:{fontSize:10},children:a})})]})})})]})]})]}):e.jsx("div",{className:"flex h-60 flex-col items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Không có dữ liệu thống kê cho khoảng thời gian đã chọn"})})})]})}function we(){const{data:d=[]}=u({queryKey:["/api/staff/top-rated"],select:n=>n.slice(0,5)}),m=n=>{switch(n){case 0:return e.jsx($,{className:"h-4 w-4 text-yellow-500"});case 1:return e.jsx(S,{className:"h-4 w-4 text-gray-400"});case 2:return e.jsx(S,{className:"h-4 w-4 text-amber-700"});default:return e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})}},h=(n,r)=>`${n.charAt(0)}${r.charAt(0)}`.toUpperCase(),i=n=>{const r=["bg-primary","bg-cyan-600","bg-amber-600","bg-emerald-600","bg-violet-600"];return r[n%r.length]},t=[{id:1,firstName:"An",lastName:"Nguyễn Văn",avatar:"https://i.pravatar.cc/150?img=1",email:"vana@example.com",position:"Chuyên gia tạo kiểu tóc",rating:4.9,feedbackCount:128},{id:2,firstName:"Bình",lastName:"Trần Thị",avatar:"https://i.pravatar.cc/150?img=21",email:"thib@example.com",position:"Stylist cao cấp",rating:4.8,feedbackCount:97},{id:3,firstName:"Cường",lastName:"Lê Văn",avatar:"https://i.pravatar.cc/150?img=3",email:"vanc@example.com",position:"Thợ uốn tóc",rating:4.7,feedbackCount:85},{id:4,firstName:"Danh",lastName:"Phạm Thị",avatar:"https://i.pravatar.cc/150?img=4",email:"thid@example.com",position:"Chuyên gia màu tóc",rating:4.6,feedbackCount:76},{id:5,firstName:"Hà",lastName:"Hoàng Văn",avatar:"https://i.pravatar.cc/150?img=51",email:"vane@example.com",position:"Stylist",rating:4.5,feedbackCount:63}],o=d.length>0?d:t;return e.jsxs(y,{className:"h-full",children:[e.jsxs(N,{className:"pb-2",children:[e.jsxs(b,{className:"flex items-center text-base font-medium",children:[e.jsx($,{className:"mr-2 h-5 w-5 text-yellow-500"}),"Top 5 Nhân viên hàng đầu"]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Nhân viên được đánh giá cao nhất dựa trên phản hồi của khách hàng"})]}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:o.map((n,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-none",children:m(r)}),e.jsxs(M,{className:"h-9 w-9 flex-none",children:[e.jsx(_,{src:n.avatar}),e.jsx(Z,{className:i(r),children:h(n.lastName,n.firstName)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"truncate text-sm font-medium",children:[n.lastName," ",n.firstName]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"mr-1 h-3.5 w-3.5 text-yellow-500",fill:"currentColor"}),e.jsx("span",{className:"text-sm font-medium",children:n.rating.toFixed(1)})]})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[e.jsx("p",{className:"truncate text-xs text-muted-foreground",children:n.position}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.feedbackCount," đánh giá"]})]}),e.jsx(ne,{value:n.rating*20,className:"mt-1.5 h-1.5",indicatorClassName:r===0?"bg-yellow-500":r===1?"bg-gray-400":r===2?"bg-amber-700":"bg-primary"})]})]},n.id))})})]})}function j({title:d,value:m,icon:h,changeType:i,changeValue:t=0,changeLabel:o="",percentValue:n,percentLabel:r=""}){const a=()=>{const x="h-6 w-6";switch(h){case"calendar":return e.jsx(A,{className:`${x} text-primary`});case"money":return e.jsx(ue,{className:`${x} text-secondary`});case"users":return e.jsx(K,{className:`${x} text-info`});case"star":return e.jsx(k,{className:`${x} text-warning`});default:return e.jsx(A,{className:`${x} text-primary`})}},l=()=>{switch(h){case"calendar":return"bg-primary-light bg-opacity-10";case"money":return"bg-secondary-light bg-opacity-10";case"users":return"bg-info bg-opacity-10";case"star":return"bg-warning bg-opacity-10";default:return"bg-primary-light bg-opacity-10"}},f=()=>i?i==="increase"?"text-success":"text-error":"text-neutral-mid";return e.jsx(y,{children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-mid text-sm",children:d}),e.jsx("p",{className:"text-neutral-dark text-2xl font-bold",children:m})]}),e.jsx("div",{className:`rounded-full p-2 ${l()}`,children:a()})]}),e.jsxs("div",{className:"mt-2",children:[i&&t!==void 0&&e.jsxs("span",{className:`flex items-center text-sm font-medium ${f()}`,children:[i==="increase"?e.jsx(ae,{className:"mr-1 h-4 w-4"}):e.jsx(se,{className:"mr-1 h-4 w-4"}),t,"% ",o]}),n!==void 0&&e.jsxs("span",{className:"text-neutral-mid text-sm font-medium",children:[n,"% ",r]})]})]})})}const Ce=[{id:1,userId:101,staffId:201,serviceId:301,date:new Date("2025-04-16T10:00:00Z"),status:"confirmed",notes:"Customer prefers morning appointments.",paymentStatus:"paid",createdAt:new Date("2025-04-15T08:00:00Z")},{id:2,userId:102,staffId:202,serviceId:302,date:new Date("2025-04-17T14:00:00Z"),status:"pending",notes:"First-time customer.",paymentStatus:"pending",createdAt:new Date("2025-04-15T09:00:00Z")},{id:3,userId:103,staffId:203,serviceId:303,date:new Date("2025-04-18T16:00:00Z"),status:"cancelled",notes:"Cancelled due to scheduling conflict.",paymentStatus:"refunded",createdAt:new Date("2025-04-15T10:00:00Z")},{id:4,userId:104,staffId:204,serviceId:304,date:new Date("2025-04-19T09:00:00Z"),status:"completed",notes:"Customer was satisfied with the service.",paymentStatus:"paid",createdAt:new Date("2025-04-15T11:00:00Z")},{id:5,userId:105,staffId:205,serviceId:305,date:new Date("2025-04-20T11:00:00Z"),status:"confirmed",notes:"Requested a specific staff member.",paymentStatus:"pending",createdAt:new Date("2025-04-15T12:00:00Z")},{id:6,userId:106,staffId:null,serviceId:306,date:new Date("2025-04-21T13:00:00Z"),status:"pending",notes:"No staff assigned yet.",paymentStatus:"pending",createdAt:new Date("2025-04-15T13:00:00Z")},{id:7,userId:107,staffId:207,serviceId:307,date:new Date("2025-04-22T15:00:00Z"),status:"completed",notes:"Customer left positive feedback.",paymentStatus:"paid",createdAt:new Date("2025-04-15T14:00:00Z")},{id:8,userId:108,staffId:208,serviceId:308,date:new Date("2025-04-23T17:00:00Z"),status:"confirmed",notes:"Customer requested a follow-up appointment.",paymentStatus:"paid",createdAt:new Date("2025-04-15T15:00:00Z")},{id:9,userId:109,staffId:null,serviceId:309,date:new Date("2025-04-24T08:00:00Z"),status:"pending",notes:"Awaiting staff assignment.",paymentStatus:"pending",createdAt:new Date("2025-04-15T16:00:00Z")},{id:10,userId:110,staffId:210,serviceId:310,date:new Date("2025-04-25T12:00:00Z"),status:"cancelled",notes:"Customer cancelled due to personal reasons.",paymentStatus:"refunded",createdAt:new Date("2025-04-15T17:00:00Z")}],ke={appointmentsToday:15,revenueToday:5e6,newCustomers:5,popularService:"Gội đầu dưỡng sinh",previousDayAppointments:12,previousDayRevenue:4e6,previousWeekCustomers:30,popularServicePercent:25};function Pe(){const{data:d=Ce,isLoading:m}=u({queryKey:["/api/appointments/today"]}),{data:h,isLoading:i}=u({queryKey:["/api/services/popular"]}),{data:t=ke,isLoading:o}=u({queryKey:["/api/stats/dashboard"]});return m||i||o?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{id:"dashboard-view",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-heading text-2xl font-bold text-neutral-900",children:"Tổng quan"}),e.jsxs("p",{className:"text-neutral-600",children:["Xin chào, hôm nay chúng ta có"," ",e.jsxs("span",{className:"font-semibold text-primary",children:[(t==null?void 0:t.appointmentsToday)||0," lịch hẹn"]})," đã xác nhận."]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(j,{title:"Lịch hẹn hôm nay",value:((t==null?void 0:t.appointmentsToday)||0).toString(),icon:"calendar",changeType:((t==null?void 0:t.appointmentsToday)||0)>((t==null?void 0:t.previousDayAppointments)||0)?"increase":"decrease",changeValue:Math.abs(Math.round((((t==null?void 0:t.appointmentsToday)||0)-((t==null?void 0:t.previousDayAppointments)||0))/((t==null?void 0:t.previousDayAppointments)||1)*100)),changeLabel:"so với hôm qua"}),e.jsx(j,{title:"Doanh thu hôm nay",value:(t!=null&&t.revenueToday?((t.revenueToday||0)/1e6).toFixed(1)+" triệu":"0")+" ₫",icon:"money",changeType:((t==null?void 0:t.revenueToday)||0)>((t==null?void 0:t.previousDayRevenue)||0)?"increase":"decrease",changeValue:Math.abs(Math.round((((t==null?void 0:t.revenueToday)||0)-((t==null?void 0:t.previousDayRevenue)||0))/((t==null?void 0:t.previousDayRevenue)||1)*100)),changeLabel:"so với hôm qua"}),e.jsx(j,{title:"Khách hàng mới",value:((t==null?void 0:t.newCustomers)||0).toString(),icon:"users",changeType:((t==null?void 0:t.newCustomers)||0)>((t==null?void 0:t.previousWeekCustomers)||0)?"increase":"decrease",changeValue:Math.abs(Math.round((((t==null?void 0:t.newCustomers)||0)-((t==null?void 0:t.previousWeekCustomers)||0))/((t==null?void 0:t.previousWeekCustomers)||1)*100)),changeLabel:"so với tuần trước"}),e.jsx(j,{title:"Dịch vụ phổ biến",value:(t==null?void 0:t.popularService)||"-",icon:"star",percentValue:(t==null?void 0:t.popularServicePercent)||0,percentLabel:"tổng doanh thu"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ye,{appointments:(d||[]).slice(0,5)})}),e.jsx("div",{children:e.jsx(we,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{children:e.jsx(je,{})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(be,{services:h||[]})})]})]})}export{Pe as default};
